@import "constants/style";

$column-width: 158px;
$column-height: 340px;

.template-column {
  display: flex;
  flex-direction: column;
  gap: $spacing--md;
  flex-shrink: 0;
  flex-grow: 1;

  width: $column-width;
  height: $column-height;

  padding: $spacing--md $spacing--base;

  border: $spacing--xxs solid var(--accent-color--light);

  z-index: $base-z-index;

  &--even {
    background-color: $gray--200;
  }
  &--odd {
    background-color: $gray--100;
  }

  // not the column that's currently being dragged, but actually where it was
  &--active-drag {
    background-color: rgba(var(--accent-color--100-rgb, 0.5));
    border: $spacing--xxs dashed var(--accent-color--light);
    z-index: $base-z-index + $base-z-index-step; // display dragged item above others
  }

  &--active-drop {
    background-color: rgba(var(--accent-color--100-rgb, 0.5));
    border: $spacing--xxs dashed var(--accent-color--light);
  }

  &--hidden {
    background-image: $column-stripes--light;
  }

  // deactivate borders depending on position
  &--border {
    &-first {
      border-right: none;
    }
    &-center {
      border-left: none;
      border-right: none;
    }
    &-last {
      border-left: none;
    }
  }
}

.template-column__name-wrapper {
  display: flex;
  flex-direction: column;
  gap: $spacing--xs;

  &:hover {
    // affect both with prio
    .template-column__name,
    .template-column__inline-description {
      color: $navy--400;
    }
  }
}

// TODO input style wip
.template-column__name {
  all: unset;

  align-self: flex-start; // only take as much space as needed
  // extend border to bottom and right
  padding: 0 $spacing--xs $spacing--xs 0;
  max-width: 100%;

  font-size: $text--base;
  font-weight: 600;
  color: $gray--800;
  border-bottom: 2px solid var(--accent-color--light);

  overflow: hidden;
  white-space: nowrap;
  text-overflow: ellipsis;

  &:hover {
    // color: $navy--400;
  }

  &:focus {
    border-bottom-style: dashed; // TODO dash spacing
  }
}

.template-column__inline-description {
  color: $gray--800;
  font-size: $text--xs;
  font-weight: 500;

  overflow: hidden;
  white-space: nowrap;
  text-overflow: ellipsis;

  &:hover {
    // color: $navy--400;
  }
}

.template-column__description-wrapper {
  display: flex;
  flex-direction: column;
}

.template-column__description-mini-menu {
  margin-left: auto; // couldn't get align-self: flex-end to work so whatever
}

.template-column__menu {
  position: relative;
  display: flex;
  flex-direction: column;
  gap: $spacing--xl; // TODO proper gaps
  align-items: center;
}

.template-column__icon {
  width: $icon--large;
  height: $icon--large;

  &--dnd {
    width: 22px;
    height: 15px;
  }
}

.template-column__drag-element {
  cursor: grab;
  touch-action: none; // prevent funky mobile dnd behaviour

  &--dragging {
    cursor: grabbing;
  }
}

// TODO subject to change with column
.columns-configurator-column__color-picker {
  position: absolute;
  // some precise but hardcoded positioning values so it fits exactly on top of the active color
  // varying by column position (left, center, right) probably because of borders ig
  top: 40px - 1px;
  left: 40px + 1px;

  &--column-center {
    left: 40px + 3px;
  }
}

.template-column__button {
  all: unset;
  cursor: pointer;
  max-width: $icon--large;
  max-height: $icon--large;

  &:disabled {
    color: $gray--800;
    cursor: default;
  }
}

[theme="dark"] {
  .template-column {
    border-color: var(--accent-color--dark);

    &--active-drag {
      background-color: rgba(var(--accent-color--200-rgb, 0.5));
      border-color: var(--accent-color--dark);
    }

    &--active-drop {
      background-color: rgba(var(--accent-color--200-rgb, 0.5));
      border-color: var(--accent-color--dark);
    }
  }
}
